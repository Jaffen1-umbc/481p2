#define SWAP_HI_LO(x) ( (( (x) >> 8) & 0xFF) | ((x) & 0xFF) << 8 )
#define poo 0xFFFA
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
int main(){
	unsigned char temp[2] = {0xFA, 0xFF};
	unsigned short val = poo, end=0xFFFA, free = 0xFFFC;
    unsigned char arr[] = {
0x33, 0x00, 0xc7, 0x00,  'h',  'e',  'l',  'l',  'o',  '1',  '2',  '3',  'a', 'b',  'c',  'd', 
0x20, 0x18, 0x10, 0x10, 0x10, 0x10, 0x00, 0x10, 0x16, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00};
    unsigned char but[3] = {0x07,0x00,0xFC};
    unsigned char *p = calloc(0 * 512, 1);
    printf("%i %i %i \n", sizeof(p), sizeof(&p), sizeof(*p)); 
    FILE *fp;
    fp = fopen("poo.loo", "wb+");
    printf("%i, %i, %i, %i\n", &arr, sizeof(*arr), sizeof(&arr), sizeof(arr));  
    printf("%i, %i, %i\n", &val, sizeof(&val), sizeof(val));  
	fwrite(&arr, sizeof(&arr), sizeof(arr), fp); 
	fseek(fp, 0, SEEK_SET);
    fread(&val, sizeof(&val), 1, fp);
    printf("%x", val);
    fclose(fp);
    return 0;
	printf("%i %i %x %x %x %x", sizeof(val), sizeof(&val), end, SWAP_HI_LO(end), free, SWAP_HI_LO(free));
//	return 0;

    
	printf("%i, %i, %i", &arr, sizeof(*arr), sizeof(arr));    

    
//    fread(arr, 4, sizeof(unsigned char), fp);

    printf("%s\n", arr);
    //memcpy(arr, but, 3);
    //printf("%s\n", arr);

   // fwrite(but, sizeof(unsigned char), 3, fp);
    fseek(fp, 0, SEEK_SET);
    fread(&val, sizeof(&val), 1, fp);
 printf("%4x %4x %4x %4x", val, SWAP_HI_LO(val), free, SWAP_HI_LO(free));    
printf("%x\n", arr[0]);
    fclose(fp);

}
SLD ENTRY[0x02] => index = 0x3b
index * 512 => file_loc
READ 512
FAT+index*2 => index    = 0x3a
index * 512 => file_loc
READ 512
FAT+index*2 => index    = 0x39
index * 512 => file_loc 
READ 512
FAT+index*2 => index    = 0xfffa
done
while (current_index != FAT_MARKER_END_OF_CHAIN	// not end of chain
			&& current_index != FAT_MARKER_FREE_BLOCK 	// not free block
			&& current_index != -1						// not error from get_next_block_index
			&& read_blocks_index < single_dir_entry_info[SLD_ENTRY_SIZE_OFFSET(0)]); // dont read past limit
			
current_index = 0x3b
    read from 0x3b * BLOCK_SIZE for BLOCK_SIZE
    read_blocks_index++ --> 1
    current_index = get_next_block_index(current_index, file) --> 0x3a
    while: 0x3a != 0xFFFA && 0x3a != 0xFFFC && 0x3a != -1 && 1 < 3 
current_index = 0x3a
    read from 0x3a * BLOCK_SIZE for BLOCK_SIZE
    read_blocks_index++ --> 2
    current_index = get_next_block_index(current_index, file) --> 0x39
    while: 0x39 != 0xFFFA && 0x39 != 0xFFFC && 0x39 != -1 && 2 < 3
current_index = 0x39
    read from 0x39 * BLOCK_SIZE for BLOCK_SIZE
    read_blocks_index++ --> 3
    current_index = get_next_block_index(current_index, file) --> 0xFFFA
    while: 0xFFFA != 0xFFFA && 0xFFFA != 0xFFFC && 0xFFFA != -1 && 3 < 3

current_index = 0x3a
current_index = 0x39
current_index = 0xFFFA
/*
SLD:
0001fb60: 3300 3b00 5350 4d41 474e 454f 2e44 5430  3.;.SPMAGNEO.DT0
0001fb70: 2018 0902 2234 5206 0300 0000 0000 0000   ..."4R.........
FAT:
0001fc00: fcff fcff fcff fcff fcff fcff fcff fcff  ................
0001fc10: fcff fcff fcff fcff fcff fcff fcff fcff  ................
0001fc20: faff 1000 1100 faff 1300 1400 faff 1600  ................
0001fc30: 1700 1800 1900 1a00 1b00 1c00 1d00 1e00  ................
0001fc40: 1f00 2000 2100 2200 2300 2400 2500 2600  .. .!.".#.$.%.&.
0001fc50: 2700 2800 faff 2a00 2b00 2c00 2d00 2e00  '.(...*.+.,.-...
0001fc60: faff 3000 3100 3200 3300 3400 3500 3600  ..0.1.2.3.4.5.6.
0001fc70: 3700 faff 3900 3a00 faff 3c00 3d00 3e00  7...9.:...<.=.>.
0001fc80: 3f00 4000 4100 4200 4300 4400 faff 4600  ?.@.A.B.C.D...F.
0001fc90: 4700 4800 4900 4a00 4b00 4c00 4d00 4e00  G.H.I.J.K.L.M.N.
0001fca0: 4f00 5000 5100 5200 5300 5400 5500 5600  O.P.Q.R.S.T.U.V.
0001fcb0: 5700 5800 5900 5a00 5b00 5c00 5d00 5e00  W.X.Y.Z.[.\.].^.
0001fcc0: 5f00 6000 faff 6200 6300 6400 6500 6600  _.`...b.c.d.e.f.
0001fcd0: 6700 6800 6900 6a00 6b00 6c00 6d00 6e00  g.h.i.j.k.l.m.n.
0001fce0: 6f00 7000 7100 7200 faff 7400 7500 7600  o.p.q.r...t.u.v.
0001fcf0: 7700 7800 7900 7a00 7b00 7c00 7d00 7e00  w.x.y.z.{.|.}.~.
0001fd00: 7f00 8000 8100 8200 8300 8400 8500 8600  ................
0001fd10: 8700 8800 8900 8a00 8b00 8c00 8d00 8e00  ................
0001fd20: 8f00 9000 9100 9200 9300 9400 9500 9600  ................
0001fd30: 9700 9800 9900 9a00 9b00 9c00 9d00 9e00  ................
0001fd40: 9f00 a000 a100 a200 a300 a400 a500 a600  ................
0001fd50: faff a800 faff aa00 faff ac00 ad00 ae00  ................
0001fd60: af00 b000 b100 b200 b300 b400 b500 b600  ................
0001fd70: faff b800 b900 ba00 faff bc00 bd00 be00  ................
0001fd80: faff c000 fcff fcff fcff fcff fcff faff  ................
0001fd90: fcff fcff fcff fcff fcff fcff fcff fcff  ................
0001fda0: fcff fcff fcff fcff fcff fcff fcff fcff  ................
0001fdb0: fcff fcff fcff fcff fcff fcff fcff fcff  ................
0001fdc0: fcff fcff fcff fcff fcff fcff fcff fcff  ................
0001fdd0: fcff fcff fcff fcff fcff fcff fcff fcff  ................
0001fde0: fcff faff f100 f200 f300 f400 f500 f600  ................
0001fdf0: f700 f800 f900 fa00 fb00 fc00 faff faff  ................
EXPECTED: 3B:
00007600: 4e45 4f20 4741 4d45 4441 5441 2020 2020  NEO GAMEDATA    
00007610: 5375 7065 724d 6167 6e65 7469 634e 656f  SuperMagneticNeo
00007620: 2020 2020 2020 2020 2020 2020 2020 2020                  
00007630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007640: 0100 0100 0000 3ad9 b001 0000 0000 0000  ......:.........
00007650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007660: 33f6 34f7 35f9 36fa 33f4 ddfd ccfc ccfc  3.4.5.6.3.......
00007670: ccfc 99f9 77f7 55f5 33f3 33f3 00f0 00f0  ....w.U.3.3.....
00007680: 3333 3333 3333 3333 3333 3333 3333 3333  3333333333333333
00007690: 3333 3333 3321 04dd dd40 1233 3333 3333  33333!...@.33333
000076a0: 3333 3333 204d dddd dddd d402 3333 3333  3333 M......3333
000076b0: 3333 3331 4ddd dddd dddd ddd4 1333 3333  3331M........333
000076c0: 3333 320d dddd dddd dddd dddd d023 3333  332..........#33
000076d0: 3333 20dd dddd dddd dddd dbaa bc02 3333  33 ...........33
000076e0: 3333 0ddd dddd dddd dddb 9555 59c0 3333  33.........UY.33
000076f0: 3331 ddb9 99bd dddd ddb8 5555 559c 1333  31........UUU..3
00007700: 3324 da75 5559 dddd dd95 5555 555a 4233  3$.uUY....UUUZB3
00007710: 330d b655 5555 addd db65 5555 5558 d033  3..UUU...eUUUX.3
00007720: 324d 9555 5555 9ddd db55 5555 5557 c423  2M.UUU...UUUUW.#
00007730: 31dd 9555 5555 7ddd db65 5555 5558 cd13  1..UUU}..eUUUX..
00007740: 30dd 9555 5555 8baa aa75 5555 5559 dd03  0..UUU...uUUUY..
00007750: 34dd b555 5555 6555 5555 5555 555b dd43  4..UUUeUUUUUU[.C
00007760: 3ddd d955 5555 5555 5555 5555 56ad ddd3  =..UUUUUUUUUV...
00007770: 3ddd dda9 7555 5555 5555 5579 9bdd ddd3  =...uUUUUUUy....
00007780: 3ddd dddd 9599 9755 5556 558b dddd ddd3  =......UUVU.....
00007790: 3ddd dddb 5add db85 59bb a759 dddd ddd3  =...Z...Y..Y....
000077a0: 34dd ddd9 9ddd dda5 9ddd da58 dddd dd43  4..........X...C
000077b0: 30dd ddd9 addd ddb5 bddd dd68 bddd dd03  0..........h....
000077c0: 31dd ddd9 9ddd ddb5 bddd dd67 bddd dd13  1..........g....
000077d0: 324d ddd9 8cdd dd95 9ddd da58 cddd d423  2M.........X...#
000077e0: 330d dddb 59bc b955 59bb a759 dddd d033  3...Y..UY..Y...3
000077f0: 3324 dddd 9557 5555 5555 558c dddd 4233  3$...WUUUUU...B3
3A:
00007400: 3331 dddd c955 5555 5555 58bd dddd 1333  31...UUUUUX....3
00007410: 3333 0ddd dda8 5555 5556 9bdd ddd0 3333  33....UUUV....33
00007420: 3333 20dd dddb 7555 559b dddd dd02 3333  33 ...uUU.....33
00007430: 3333 320d dddc 6995 959d dddd d023 3333  332...i......#33
00007440: 3333 3331 4ddc 5b95 b59d ddd4 1333 3333  3331M.[......333
00007450: 3333 3333 204d dddd dddd d402 3333 3333  3333 M......3333
00007460: 3333 3333 3321 04dd dd40 1233 3333 3333  33333!...@.33333
00007470: 3333 3333 3333 3333 3333 3333 3333 3333  3333333333333333
00007480: ffff ffff ffff 0000 b80b 0000 7017 0000  ............p...
00007490: 1815 0000 100e 0000 0000 0000 0000 0000  ................
000074a0: 0000 0000 9411 0000 2823 0000 1815 0000  ........(#......
000074b0: c819 0000 0000 0000 0000 0000 0000 0000  ................
000074c0: 9411 0000 2823 0000 201c 0000 4038 0000  ....(#.. ...@8..
000074d0: 0000 0000 0000 0000 0000 0000 c819 0000  ................
000074e0: 781e 0000 4038 0000 4038 0000 0000 0000  x...@8..@8......
000074f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007530: 1400 0101 0000 0000 0000 0000 0000 0000  ................
00007540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007550: 0300 0000 0003 0101 0100 0101 0200 0000  ................
00007560: 0200 0000 0000 0000 0000 0000 0000 0000  ................
00007570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000075a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000075b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000075c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000075d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000075e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000075f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
39:
00007200: 0000 0000 0000 0000 94ad 0000 0004 0000  ................
00007210: 0400 0000 0000 0100 0000 0200 0200 0000  ................
00007220: 0101 0001 0000 0000 0000 0000 0000 0000  ................
00007230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007260: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007270: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007280: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007290: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000072a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000072b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000072c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000072d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000072e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000072f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007300: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00007390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000073a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000073b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000073c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000073d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000073e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000073f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................


